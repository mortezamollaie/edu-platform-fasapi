# Manager Role Setup Script

این اسکریپت برای ایجاد رول منیجر و اختصاص همه پرمیشن‌های موجود در دیتابیس به آن طراحی شده است.

## نحوه استفاده

### 1. اجرای ساده (استفاده از پرمیشن‌های موجود)
```bash
python create_manager_role.py
```

این دستور:
- رول منیجر را ایجاد می‌کند (اگر وجود نداشته باشد)
- همه پرمیشن‌های موجود در دیتابیس را به رول منیجر اختصاص می‌دهد

### 2. اجرا با ایجاد پرمیشن‌های پیش‌فرض
```bash
python create_manager_role.py --create-permissions
```

این دستور:
- ابتدا پرمیشن‌های پیش‌فرض را ایجاد می‌کند (اگر وجود نداشته باشند)
- سپس رول منیجر را ایجاد کرده و همه پرمیشن‌ها را به آن اختصاص می‌دهد

## پرمیشن‌های پیش‌فرض

اسکریپت پرمیشن‌های زیر را ایجاد می‌کند:

### مدیریت کاربران
- `read_users` - مشاهده کاربران
- `create_users` - ایجاد کاربر جدید  
- `update_users` - ویرایش کاربران
- `delete_users` - حذف کاربران

### مدیریت دوره‌ها
- `read_courses` - مشاهده دوره‌ها
- `create_courses` - ایجاد دوره جدید
- `update_courses` - ویرایش دوره‌ها
- `delete_courses` - حذف دوره‌ها

### مدیریت فصل‌ها
- `read_chapters` - مشاهده فصل‌ها
- `create_chapters` - ایجاد فصل جدید
- `update_chapters` - ویرایش فصل‌ها
- `delete_chapters` - حذف فصل‌ها

### مدیریت جلسات
- `read_lectures` - مشاهده جلسات
- `create_lectures` - ایجاد جلسه جدید
- `update_lectures` - ویرایش جلسات
- `delete_lectures` - حذف جلسات

### مدیریت سیستم
- `manage_roles` - مدیریت نقش‌ها
- `manage_permissions` - مدیریت پرمیشن‌ها
- `view_reports` - مشاهده گزارش‌ها
- `system_admin` - مدیریت کل سیستم

## ویژگی‌های اسکریپت

- ✅ **ایمن**: اگر رول منیجر از قبل وجود داشته باشد، فقط پرمیشن‌هایش را به‌روزرسانی می‌کند
- 🔄 **قابل تکرار**: می‌توان چندین بار اجرا کرد بدون مشکل
- 📝 **گزارش‌دهی**: نتیجه عملیات را به صورت واضح نمایش می‌دهد
- 🚫 **مدیریت خطا**: در صورت بروز خطا، تغییرات را برمی‌گرداند

## نیازمندی‌ها

- Python 3.7+
- SQLAlchemy
- دیتابیس پیکربندی شده در `app/core/config.py`

## ساختار دیتابیس

اسکریپت با جداول زیر کار می‌کند:
- `roles` - جدول نقش‌ها
- `permissions` - جدول پرمیشن‌ها  
- `role_permission` - جدول ارتباط نقش و پرمیشن

## مثال خروجی

```
🚀 Starting Manager Role Setup...
==================================================
✅ Manager role created successfully!
✅ Manager role now has 20 permissions:
   - read_users
   - create_users
   - update_users
   - ...
🎉 Manager role setup completed successfully!
==================================================
✨ Setup completed!
```
